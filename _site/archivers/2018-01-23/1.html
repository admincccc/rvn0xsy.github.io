<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>封装好的CURL class 尽情享用 « 倾旋的博客</title>
  <meta name="description" content="本篇文章主要是记录一下使用CURL的坑">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/archivers/2018-01-23/1">
  <link rel="alternate" type="application/rss+xml" title="倾旋的博客" href="http://localhost:4000/feed.xml" />
  <link href="http://rvn0xsy.oss-cn-shanghai.aliyuncs.com/css/lightbox.min.css" rel="stylesheet">
</head>


  <body>

    <div class="header-placeholder"></div>
<header class="header">
  <div class="wrapper">
    <div id="sidebar-toggle">TOC</div>
    <a class="site-title" href="/">倾旋的博客</a>
    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/">About</a>
      
        
        <a class="page-link" href="/category/">Category</a>
      
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">封装好的CURL class 尽情享用</h1>
    <p class="post-meta">Jan 23, 2018</p>
  </header>

  <article class="post-content">
    <p>本篇文章主要是记录一下使用CURL的坑
<!--more--></p>

<h2 id="0x01-类的定义">0x01 类的定义</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">http</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">http</span><span class="p">();</span>
    <span class="n">http</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">url</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">80</span><span class="p">);</span>  <span class="c1">// 设置请求地址以及端口
</span>    <span class="kt">bool</span> <span class="n">setURL</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">url</span><span class="p">);</span>    <span class="c1">// 设置请求地址
</span>    <span class="kt">bool</span> <span class="n">setPort</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">);</span> <span class="c1">// 设置端口
</span>    <span class="kt">bool</span> <span class="n">getRequest</span><span class="p">();</span>  <span class="c1">// get 方法
</span>    <span class="kt">bool</span> <span class="n">postRequest</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">data</span> <span class="o">=</span> <span class="s">""</span><span class="p">);</span> <span class="c1">// post 方法
</span>    <span class="kt">bool</span> <span class="n">setCookie</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cookie</span> <span class="o">=</span> <span class="s">""</span><span class="p">);</span>
    <span class="kt">bool</span> <span class="n">addRequestHeaders</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">header</span><span class="p">);</span> <span class="c1">// 添加请求头
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">getTitle</span><span class="p">();</span> <span class="c1">// 获取标题
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">getResponse</span><span class="p">();</span> <span class="c1">// 获取响应内容
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">getResponse</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">Key</span><span class="p">);</span> <span class="c1">// 根据指定的键名获取键值 例子：getResponse("Server"); // BWS/1.1
</span>    <span class="o">~</span><span class="n">http</span><span class="p">();</span> <span class="c1">// 释放资源
</span><span class="nl">private:</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">_responseCode</span><span class="p">;</span> <span class="c1">// 响应码
</span>    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">_timeout</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// 超时时间
</span>    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">_connectTimeout</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// 连接超时时间
</span>    <span class="kt">bool</span> <span class="n">_request</span><span class="p">();</span> <span class="c1">// 核心请求方法
</span>    <span class="n">CURL</span> <span class="o">*</span> <span class="n">curl</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// curl指针
</span>    <span class="n">CURLcode</span> <span class="n">_res</span><span class="p">;</span> <span class="c1">// 请求返回值
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_url</span><span class="p">;</span> <span class="c1">// 请求地址
</span>    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">_port</span><span class="p">;</span> <span class="c1">// 请求端口
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_title</span><span class="p">;</span> <span class="c1">// 响应标题
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_responseHeader</span><span class="p">;</span> <span class="c1">// 响应头
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_responseBody</span><span class="p">;</span> <span class="c1">// 响应主体内容
</span>    <span class="kt">bool</span> <span class="n">isRequested</span><span class="p">;</span> <span class="c1">// 是否请求完毕
</span>    <span class="n">curl_slist</span> <span class="o">*</span> <span class="n">_requestHeaders</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 请求头列表 headers 
</span>    <span class="n">curl_slist</span> <span class="o">*</span> <span class="n">_responseCookie</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span> <span class="c1">// 响应Cookie
</span>    <span class="k">static</span> <span class="kt">size_t</span> <span class="n">_callBackWrite</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">m</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span> <span class="c1">// 回调函数，用于将响应内容放入内存操作
</span><span class="p">};</span>
</code></pre></div></div>

<h2 id="0x02-主要请求方法的实现">0x02 主要请求方法的实现</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 发送请求
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">_request</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_TIMEOUT</span><span class="p">,</span><span class="n">_timeout</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span><span class="n">_connectTimeout</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span><span class="nb">false</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_SSL_VERIFYHOST</span><span class="p">,</span><span class="nb">false</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_WRITEFUNCTION</span><span class="p">,</span><span class="n">_callBackWrite</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_WRITEHEADER</span><span class="p">,</span><span class="o">&amp;</span><span class="n">_responseHeader</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_WRITEDATA</span><span class="p">,</span><span class="o">&amp;</span><span class="n">_responseBody</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">_requestHeaders</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">){</span>
        <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_HTTPHEADER</span><span class="p">,</span><span class="n">_requestHeaders</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span> <span class="n">CURLOPT_FORBID_REUSE</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">_res</span> <span class="o">=</span> <span class="n">curl_easy_perform</span><span class="p">(</span><span class="n">curl</span><span class="p">);</span>
    <span class="n">curl_easy_getinfo</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLINFO_RESPONSE_CODE</span><span class="p">,</span><span class="o">&amp;</span><span class="n">_responseCode</span><span class="p">);</span>
    <span class="n">isRequested</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="0x03-post与get的区别">0x03 POST与GET的区别</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * post请求
 * @param data
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">postRequest</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_POST</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="n">data</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
    <span class="n">_request</span><span class="p">();</span>
<span class="p">}</span>

<span class="cm">/**
 * get请求
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">getRequest</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">_request</span><span class="p">();</span>
<span class="p">}</span>

</code></pre></div></div>

<p>POST比GET多两步操作，需要设置两个值</p>

<h2 id="0x04-获取标签内容---html解析">0x04 获取标签内容 - HTML解析</h2>

<p>使用<code class="highlighter-rouge">htmlcxx</code>库，安装命令：<code class="highlighter-rouge">sudo apt-get install libhtmlcxx-dev</code></p>

<p>包含头文件：<code class="highlighter-rouge">#include &lt;htmlcxx/html/ParserDom.h&gt;</code></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 返回页面标题
 * @return
 */</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">http</span><span class="o">::</span><span class="n">getTitle</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">htmlcxx</span><span class="o">::</span><span class="n">HTML</span><span class="o">::</span><span class="n">ParserDom</span> <span class="n">parserDom</span><span class="p">;</span>
    <span class="n">tree</span><span class="o">&lt;</span><span class="n">htmlcxx</span><span class="o">::</span><span class="n">HTML</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="n">dom</span> <span class="o">=</span> <span class="n">parserDom</span><span class="p">.</span><span class="n">parseTree</span><span class="p">(</span><span class="n">_responseBody</span><span class="p">);</span>
    <span class="n">tree</span><span class="o">&lt;</span><span class="n">htmlcxx</span><span class="o">::</span><span class="n">HTML</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">dom</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="n">tree</span><span class="o">&lt;</span><span class="n">htmlcxx</span><span class="o">::</span><span class="n">HTML</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">end</span> <span class="o">=</span> <span class="n">dom</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(;</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">end</span><span class="p">;</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">tagName</span><span class="p">()</span><span class="o">==</span><span class="s">"title"</span><span class="p">)</span> <span class="c1">// 如果标签名为title
</span>        <span class="p">{</span>
            <span class="n">it</span><span class="o">++</span><span class="p">;</span>
            <span class="n">_title</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">());</span> <span class="c1">// 返回 title 标签内容
</span>        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">_title</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="0x05-根据键名获取键值---搜集信息">0x05 根据键名获取键值 - 搜集信息</h2>

<p>主要是字符串的操作</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 通过键名获取键值
 * @param Key
 * @return
 */</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">http</span><span class="o">::</span><span class="n">getResponse</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">Key</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_del</span> <span class="o">=</span> <span class="s">"</span><span class="se">\r\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">size_type</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">pos2</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_lineStr</span><span class="p">;</span>
    <span class="n">pos2</span> <span class="o">=</span> <span class="n">_responseHeader</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">_del</span><span class="p">);</span>
    <span class="n">pos1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">npos</span> <span class="o">!=</span> <span class="n">pos2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_lineStr</span>  <span class="o">=</span>  <span class="n">_responseHeader</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">pos1</span><span class="p">,</span> <span class="n">pos2</span><span class="o">-</span><span class="n">pos1</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">_lineStr</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">Key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="k">return</span> <span class="n">_lineStr</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">pos1</span> <span class="o">=</span> <span class="n">pos2</span> <span class="o">+</span> <span class="n">_del</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">pos2</span> <span class="o">=</span> <span class="n">_responseHeader</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">_del</span><span class="p">,</span> <span class="n">pos1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">pos1</span> <span class="o">!=</span> <span class="n">_responseHeader</span><span class="p">.</span><span class="n">length</span><span class="p">()){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">_lineStr</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">Key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="k">return</span> <span class="n">_lineStr</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="0x06-源代码">0x06 源代码</h2>

<p><strong>http.h</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//
// Created by payloads on 1/22/18.
//
</span>
<span class="cp">#ifndef MYPROJECT_HTTP_H
#define MYPROJECT_HTTP_H
</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;regex&gt;
#include &lt;curl/curl.h&gt;
#include &lt;htmlcxx/html/ParserDom.h&gt;
#include &lt;sstream&gt;
</span>
<span class="k">class</span> <span class="nc">http</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">http</span><span class="p">();</span>
    <span class="n">http</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">url</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">80</span><span class="p">);</span>  <span class="c1">// 设置请求地址以及端口
</span>    <span class="kt">bool</span> <span class="n">setURL</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">url</span><span class="p">);</span>    <span class="c1">// 设置请求地址
</span>    <span class="kt">bool</span> <span class="n">setPort</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">);</span> <span class="c1">// 设置端口
</span>    <span class="kt">bool</span> <span class="n">getRequest</span><span class="p">();</span>  <span class="c1">// get 方法
</span>    <span class="kt">bool</span> <span class="n">postRequest</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">data</span> <span class="o">=</span> <span class="s">""</span><span class="p">);</span> <span class="c1">// post 方法
</span>    <span class="kt">bool</span> <span class="n">setCookie</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cookie</span> <span class="o">=</span> <span class="s">""</span><span class="p">);</span>
    <span class="kt">bool</span> <span class="n">addRequestHeaders</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">header</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">getTitle</span><span class="p">();</span> <span class="c1">// 获取标题
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">getResponse</span><span class="p">();</span> <span class="c1">// 获取响应内容
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">getResponse</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">Key</span><span class="p">);</span>
    <span class="o">~</span><span class="n">http</span><span class="p">();</span>
<span class="k">private</span><span class="o">:</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">_responseCode</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">_timeout</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">_connectTimeout</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">_request</span><span class="p">();</span>
    <span class="n">CURL</span> <span class="o">*</span> <span class="n">curl</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">CURLcode</span> <span class="n">_res</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_url</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">_port</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_title</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_responseHeader</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_responseBody</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">isRequested</span><span class="p">;</span>
    <span class="n">curl_slist</span> <span class="o">*</span> <span class="n">_requestHeaders</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
    <span class="n">curl_slist</span> <span class="o">*</span> <span class="n">_responseCookie</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
    <span class="k">static</span> <span class="kt">size_t</span> <span class="n">_callBackWrite</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">m</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif //MYPROJECT_HTTP_H
</span></code></pre></div></div>

<p><strong>http.cpp</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//
// Created by payloads on 1/22/18.
//
</span>
<span class="cp">#include "http.h"
</span>
<span class="cm">/**
 * 初始化请求对象
 */</span>
<span class="n">http</span><span class="o">::</span><span class="n">http</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">curl</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">){</span>
        <span class="n">isRequested</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="n">curl</span> <span class="o">=</span> <span class="n">curl_easy_init</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**
 * 回收资源
 */</span>
<span class="n">http</span><span class="o">::~</span><span class="n">http</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">curl_slist_free_all</span><span class="p">(</span><span class="n">_requestHeaders</span><span class="p">);</span>
    <span class="n">curl_slist_free_all</span><span class="p">(</span><span class="n">_responseCookie</span><span class="p">);</span>
    <span class="n">curl_easy_cleanup</span><span class="p">(</span><span class="n">curl</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**
 * 设置请求地址和端口
 * @param url
 * @param port
 */</span>
<span class="n">http</span><span class="o">::</span><span class="n">http</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">url</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">curl</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">){</span>
        <span class="n">curl</span> <span class="o">=</span> <span class="n">curl_easy_init</span><span class="p">();</span>
        <span class="n">_url</span>  <span class="o">=</span> <span class="n">url</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="s">"https"</span><span class="p">){</span>
            <span class="n">_port</span> <span class="o">=</span> <span class="mi">443</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">_port</span> <span class="o">=</span> <span class="n">port</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_URL</span><span class="p">,</span><span class="n">_url</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
        <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_PORT</span><span class="p">,</span><span class="n">_port</span><span class="p">);</span>

    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**
 * 设置请求地址
 * @param url
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">setURL</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_URL</span><span class="p">,</span><span class="n">url</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="p">}</span>

<span class="cm">/**
 * 设置端口
 * @param port
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">setPort</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_PORT</span><span class="p">,</span><span class="n">port</span><span class="p">);</span>
<span class="p">}</span>


<span class="cm">/**
 * 发送请求
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">_request</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_TIMEOUT</span><span class="p">,</span><span class="n">_timeout</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span><span class="n">_connectTimeout</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span><span class="nb">false</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_SSL_VERIFYHOST</span><span class="p">,</span><span class="nb">false</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_WRITEFUNCTION</span><span class="p">,</span><span class="n">_callBackWrite</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_WRITEHEADER</span><span class="p">,</span><span class="o">&amp;</span><span class="n">_responseHeader</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_WRITEDATA</span><span class="p">,</span><span class="o">&amp;</span><span class="n">_responseBody</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">_requestHeaders</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">){</span>
        <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_HTTPHEADER</span><span class="p">,</span><span class="n">_requestHeaders</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span> <span class="n">CURLOPT_FORBID_REUSE</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">_res</span> <span class="o">=</span> <span class="n">curl_easy_perform</span><span class="p">(</span><span class="n">curl</span><span class="p">);</span>
    <span class="n">curl_easy_getinfo</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLINFO_RESPONSE_CODE</span><span class="p">,</span><span class="o">&amp;</span><span class="n">_responseCode</span><span class="p">);</span>
    <span class="n">isRequested</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**
 * 回调函数
 * @param ptr
 * @param n
 * @param m
 * @param data
 * @return
 */</span>
<span class="kt">size_t</span> <span class="n">http</span><span class="o">::</span><span class="n">_callBackWrite</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">m</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">data</span><span class="o">-&gt;</span><span class="n">append</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="n">n</span><span class="o">*</span><span class="n">m</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">n</span><span class="o">*</span><span class="n">m</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**
 * get请求
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">getRequest</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">_request</span><span class="p">();</span>
<span class="p">}</span>

<span class="cm">/**
 * post请求
 * @param data
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">postRequest</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_POST</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="n">data</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
    <span class="n">_request</span><span class="p">();</span>
<span class="p">}</span>


<span class="cm">/**
 * 设置Cookie
 * @param cookie
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">setCookie</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cookie</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">curl_easy_setopt</span><span class="p">(</span><span class="n">curl</span><span class="p">,</span><span class="n">CURLOPT_COOKIE</span><span class="p">,</span><span class="n">cookie</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="p">}</span>

<span class="cm">/**
 * 设置请求头
 * @param header
 * @return
 */</span>
<span class="kt">bool</span> <span class="n">http</span><span class="o">::</span><span class="n">addRequestHeaders</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">header</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_requestHeaders</span> <span class="o">=</span> <span class="n">curl_slist_append</span><span class="p">(</span><span class="n">_requestHeaders</span><span class="p">,</span><span class="n">header</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="p">}</span>

<span class="cm">/**
 * 返回页面标题
 * @return
 */</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">http</span><span class="o">::</span><span class="n">getTitle</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">htmlcxx</span><span class="o">::</span><span class="n">HTML</span><span class="o">::</span><span class="n">ParserDom</span> <span class="n">parserDom</span><span class="p">;</span>
    <span class="n">tree</span><span class="o">&lt;</span><span class="n">htmlcxx</span><span class="o">::</span><span class="n">HTML</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="n">dom</span> <span class="o">=</span> <span class="n">parserDom</span><span class="p">.</span><span class="n">parseTree</span><span class="p">(</span><span class="n">_responseBody</span><span class="p">);</span>
    <span class="n">tree</span><span class="o">&lt;</span><span class="n">htmlcxx</span><span class="o">::</span><span class="n">HTML</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">dom</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
    <span class="n">tree</span><span class="o">&lt;</span><span class="n">htmlcxx</span><span class="o">::</span><span class="n">HTML</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">end</span> <span class="o">=</span> <span class="n">dom</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(;</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">end</span><span class="p">;</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">tagName</span><span class="p">()</span><span class="o">==</span><span class="s">"title"</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">it</span><span class="o">++</span><span class="p">;</span>
            <span class="n">_title</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">text</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">_title</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**
 * 返回响应头
 * @return
 */</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">http</span><span class="o">::</span><span class="n">getResponse</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">_responseHeader</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**
 * 通过键名获取键值
 * @param Key
 * @return
 */</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">http</span><span class="o">::</span><span class="n">getResponse</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">Key</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_del</span> <span class="o">=</span> <span class="s">"</span><span class="se">\r\n</span><span class="s">"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">size_type</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">pos2</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">_lineStr</span><span class="p">;</span>
    <span class="n">pos2</span> <span class="o">=</span> <span class="n">_responseHeader</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">_del</span><span class="p">);</span>
    <span class="n">pos1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">npos</span> <span class="o">!=</span> <span class="n">pos2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_lineStr</span>  <span class="o">=</span>  <span class="n">_responseHeader</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">pos1</span><span class="p">,</span> <span class="n">pos2</span><span class="o">-</span><span class="n">pos1</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">_lineStr</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">Key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="k">return</span> <span class="n">_lineStr</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">pos1</span> <span class="o">=</span> <span class="n">pos2</span> <span class="o">+</span> <span class="n">_del</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">pos2</span> <span class="o">=</span> <span class="n">_responseHeader</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">_del</span><span class="p">,</span> <span class="n">pos1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">pos1</span> <span class="o">!=</span> <span class="n">_responseHeader</span><span class="p">.</span><span class="n">length</span><span class="p">()){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">_lineStr</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">Key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="k">return</span> <span class="n">_lineStr</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">Key</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>main.cpp</strong></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include "http.h"
</span><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span><span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"args count :"</span> <span class="o">&lt;&lt;</span> <span class="n">argc</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">http</span> <span class="n">client</span><span class="p">(</span><span class="s">"https://www.baidu.com/"</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">argc</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">){</span>
        <span class="n">client</span><span class="p">.</span><span class="n">setURL</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="n">client</span><span class="p">.</span><span class="n">getRequest</span><span class="p">();</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">client</span><span class="p">.</span><span class="n">getTitle</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">client</span><span class="p">.</span><span class="n">getResponse</span><span class="p">(</span><span class="s">"Set-Cookie"</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="0x07-参考">0x07 参考</h2>

<ul>
  <li>C++ Html解析器-HtmlCxx用户手册和源代码解析 ： https://www.cnblogs.com/zhanglanyun/archive/2011/10/21/2220647.html</li>
  <li>C++ 分割字符串两种方法：https://www.cnblogs.com/dfcao/p/cpp-FAQ-split.html</li>
  <li>libcurl - API：https://curl.haxx.se/libcurl/c/</li>
</ul>

<h2 id="0x08-结语">0x08 结语</h2>

<p>后面继续扩展代理功能、并不是很难</p>

<p>希望能够把轮子造好，为后面的项目开发做准备。</p>


  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="http://rvn0xsy.oss-cn-shanghai.aliyuncs.com/images/head.jpeg" alt="倾旋">
  <div class="col-box-title name">倾旋</div>
  <p>安全从业者，爱好安全产品开发，渗透测试，Web漏洞研究</p>
  <p class="contact">
    
    <a href="https://github.com/rvn0xsy">GitHub</a>
    
    
    <a href="javascript:document.write('payloads'+'@'+'aliyun.com');">Email</a>
    
    <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a><a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_evernotecn" data-cmd="evernotecn" title="分享到印象笔记"></a><a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a><a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a><a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a><a href="#" class="bds_print" data-cmd="print" title="分享到打印"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","qzone","tsina","bdysc","weixin","sqq","youdao","mail","fbook","twi","linkedin","h163","evernotecn","copy","print"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">Newest Posts</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/archivers/2018-04-18/1">服务器启用了不安全的HTTP方法</a></li>
    
      <li><a class="post-link" href="/archivers/2018-04-16/3">点击劫持：X-Frame-Options头丢失</a></li>
    
      <li><a class="post-link" href="/archivers/2018-04-16/2">Slow HTTP DOS</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-27/1">使用CrackMapExec 进行 NTLM Hash传递攻击</a></li>
    
      <li><a class="post-link" href="/archivers/2018-04-18/2">中间件版本信息泄露</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-22/1">远程代码执行</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-21/1">Web安全测试学习手册</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-20/1">浅谈使用C语言开发服务端漏洞扫描设计</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-18/1">渗透测试中使用Ubuntu的一些小技巧</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-16/4">Redis未授权访问简介</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-16/1">信安从业人员的编程之路</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-16/2">msfconsole常用命令</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-16/3">Python命令行:getopt模块详解</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-11/1">重放Flash上传数据包</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-05/1">C/C++ 子域名A记录枚举(多线程)</a></li>
    
      <li><a class="post-link" href="/archivers/2018-03-04/1">使用C语言发送伪造源IP的UDP请求及DRDOS拒绝服务攻击原理剖析</a></li>
    
      <li><a class="post-link" href="/archivers/2018-02-28/1">C++/C实现DNS查询</a></li>
    
      <li><a class="post-link" href="/archivers/2018-02-11/1">无聊写个C语言创建Jekyll文章的程序</a></li>
    
      <li><a class="post-link" href="/archivers/2018-02-10/1">DNS协议编程</a></li>
    
      <li><a class="post-link" href="/archivers/2018-02-07/1">关于CVE-2018-6580其他Tips分析</a></li>
    
      <li><a class="post-link" href="/archivers/2018-02-05/1">Fuzzing With FuzzDB to Web Attack</a></li>
    
      <li><a class="post-link" href="/archivers/2018-02-02/1">内网渗透常见端口转发方式</a></li>
    
      <li><a class="post-link" href="/archivers/2018-02-01/1">Metasploit - MS17010通用模块</a></li>
    
      <li><a class="post-link" href="/archivers/2018-01-25/1">从网络扼杀Metasploit木马</a></li>
    
      <li><a class="post-link" href="/archivers/2018-01-23/1">封装好的CURL class 尽情享用</a></li>
    
      <li><a class="post-link" href="/archivers/2018-01-30/1">针对某跨国企业的一次渗透测试-持续</a></li>
    
      <li><a class="post-link" href="/archivers/2018-01-22/1">我的丽江之旅</a></li>
    
      <li><a class="post-link" href="/archivers/2018-01-05/1">Sqlmap tamper 总结</a></li>
    
      <li><a class="post-link" href="/archivers/2017-12-28/1">针对国内一大厂的后渗透 - 持续</a></li>
    
      <li><a class="post-link" href="/archivers/2017-12-06/1">TP-LINK Shell调试后门浅析</a></li>
    
      <li><a class="post-link" href="/archivers/2017-11-22/1">CVE-2017-11882钓鱼攻击</a></li>
    
      <li><a class="post-link" href="/archivers/2017-11-21/1">CVE-2017-11882漏洞复现</a></li>
    
      <li><a class="post-link" href="/archivers/2017-11-19/1">C++ libghttp库</a></li>
    
      <li><a class="post-link" href="/archivers/2017-11-16/1">搭建Mattermost并开启Https</a></li>
    
      <li><a class="post-link" href="/archivers/2017-11-15/1">小型Web安全加固方案</a></li>
    
      <li><a class="post-link" href="/archivers/2017-11-14/1">CTF - 美眉的手机号</a></li>
    
      <li><a class="post-link" href="/archivers/2017-11-13/1">高效-搭建一个Github静态博客</a></li>
    
      <li><a class="post-link" href="/tools/socat">socat 使用手册</a></li>
    
      <li><a class="post-link" href="/archivers/2017-11-09/1">DNS信息搜集工具小结</a></li>
    
      <li><a class="post-link" href="/archivers/2017-11-08/1">Windows下命令行下载文件总结</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">TOC</div>
</div>

        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2018 倾旋
</div>
</footer>

<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});</script>
<script src="/js/easybook.js"></script>

<script type="text/javascript" src="http://rvn0xsy.oss-cn-shanghai.aliyuncs.com/js/lightbox-plus-jquery.min.js"></script>
<script type="text/javascript" src="/js/global.js"></script>
</body>
</html>
